<!DOCTYPE html><html lang="en"><head><link rel="icon" href="favicon.ico"><script defer="defer" src="kfh.js"></script></head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="color-scheme" content="light dark"><title>Key Font Helper | 按键字体助手</title><link rel="stylesheet" href="https://cwh.ca510.com/key-font/key_font.css"><link rel="stylesheet" href="https://cwh.ca510.com/1-level-font/table.css"><style>body,html{height:100%;padding:0;margin:0}#app{display:flex;flex-direction:column;height:100%;padding:0 10px}#panel>div{margin:0 20px}select{min-width:6rem}#result,#text{min-height:4rem;border:1px solid gray;border-radius:.25rem;width:100%;box-sizing:border-box;padding:5px;margin:8px 2px;word-break:break-all}#text[contenteditable]:empty::before{content:attr(data-placeholder);color:#999;position:absolute;pointer-events:none}#preview{display:flex}@media (max-width:600px){#preview{flex-direction:column}}#mapping{flex:1;display:flex;height:85vh;justify-content:center}.table-container,.table-view{min-width:unset;width:fit-content}#api{word-break:break-all}.footer{text-align:center;padding:15px;font-size:14px;color:gray}.footer a{color:gray;text-decoration:underline}@media (prefers-color-scheme:dark){svg{filter:invert(1)}}</style><h1><span>Key Font Helper</span><span>按键字体助手</span></h1><div id="app"><div class="panel"><div class="form-group"><input id="series-input" type="radio" name="type" value="series" checked="checked"> <label for="series-input">Series Based</label></div><div class="form-group"><input id="font-input" type="radio" name="type" value="font"> <label for="font-input">Font Based</label></div><div id="series-panel"><label for="series"></label><select id="series"></select></div><div id="font-panel" style="display:none"><label for="font"></label><select id="font"></select></div><div id="title-panel"><input type="checkbox" id="title" checked="checked"><label for="title">title attribute</label></div><div id="aria-label-panel"><input type="checkbox" id="aria-label" checked="checked"><label for="aria-label">aria-label attribute</label></div></div><div id="preview"><div id="text" contenteditable="plaintext-only" data-placeholder="1[+]1"></div><div id="result"></div></div><div id="api"><div>Mapping Config API: <a id="configApi" target="_blank"></a></div><div>Convert Key Text API: <a id="htmlApi" target="_blank"></a></div></div><div id="mapping"></div><footer class="footer"><span><svg viewBox="0 0 16 16" width="12" height="12"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path></svg></span><span><a href="https://github.com/CalcWorld/KeyFontHelper" target="_blank">KeyFontHelper</a></span></footer></div><script>const font=document.getElementById("font"),series=document.getElementById("series"),text=document.getElementById("text"),result=document.getElementById("result"),mapping=document.getElementById("mapping"),configApi=document.getElementById("configApi"),htmlApi=document.getElementById("htmlApi"),titleCheckbox=document.getElementById("title"),ariaLabelCheckbox=document.getElementById("aria-label"),ascii=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","!","$",'"',"'","%","&","(",")","*","+",".",",","-","/","=","^","~","#","{","<",">","?","@","[","}","]",":",";","_","`","|","\\"],renderResult=()=>{const e=document.querySelector('input[name="type"]:checked').value;let t="";const n=document.createElement("div");n.textContent=text.innerText;const l=n.innerHTML.replace(/\n/g,"<br>"),o={ariaLabel:ariaLabelCheckbox.checked,title:titleCheckbox.checked};"series"===e?(result.innerHTML=kfh.text2KeyFontBySeries(series.value,l||text.dataset.placeholder,o),t=`&series=${series.value}`):"font"===e&&(result.innerHTML=kfh.text2KeyFont(font.value,l||text.dataset.placeholder,o),t=`&font=${font.value}`),l?(result.style.color="",result.style.pointerEvents="",result.style.userSelect="",htmlApi.href=`/api/html?type=${e}${t}${o.ariaLabel?"&ariaLabel=1":""}${o.title?"&title=1":""}&text=${encodeURIComponent(l)}`,htmlApi.innerText=htmlApi.href.length>100?`${htmlApi.href.substring(0,100)}[...]`:htmlApi.href):(result.style.color="#999",result.style.pointerEvents="none",result.style.userSelect="none",htmlApi.innerText="")};text.oninput=renderResult,titleCheckbox.onchange=renderResult,ariaLabelCheckbox.onchange=renderResult,font.onchange=series.onchange=()=>{renderResult(),loadMapping()},document.querySelectorAll('input[name="type"]').forEach((e=>{e.addEventListener("change",(()=>{document.querySelectorAll('[id$="-panel"]').forEach((e=>e.style.display="none")),e.checked&&(document.getElementById(`${e.value}-panel`).style.display=""),renderResult(),loadMapping()}))}));const loadMapping=()=>{const e=document.querySelector('input[name="type"]:checked').value,t=kfh.config.filter((t=>"series"===e?t.series===series.value:t.font===font.value));mapping.innerHTML=`<div class="table-container"><table class="table-view"><thead>\n<tr>\n<th>ASCII</th>\n${t.map((e=>`<th colspan="2">${e.family.replace("CASIO ","")}</th>`)).join("")}\n</tr></thead>\n<tbody>\n${ascii.map((e=>`<tr><td>${e}</td>${t.map((t=>`<td style="font-family:'${t.family}'">${e}</td><td>${t.mapping[e]?.join("<br>")??""}</td>`)).join("")}</tr>`)).join("")}\n</tbody>\n</div>`,configApi.href=`/api/config?type=${e}${"series"===e?`&series=${series.value}`:`&font=${font.value}`}`,configApi.innerText=configApi.href},fontsPreload=()=>kfh.config.map((e=>{const t=document.createElement("span");t.style.fontFamily=e.family,t.innerHTML="0",document.body.appendChild(t),window.getComputedStyle(t).getPropertyValue("font-family"),t.remove()}));window.addEventListener("load",(function(){kfh.config.forEach((e=>{const t=document.createElement("option");t.value=e.font,t.innerText=e.family,font.appendChild(t)})),kfh.series.forEach((e=>{const t=document.createElement("option");t.value=e,t.innerText=e,series.appendChild(t)})),renderResult(),loadMapping(),text.focus(),fontsPreload()}))</script></html>